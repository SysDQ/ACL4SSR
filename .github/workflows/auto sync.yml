name: 自动同步上游仓库

permissions:
  contents: write

on:
  schedule:
    # 每天北京时间早上 8 点运行一次 (UTC 0:00)
    - cron: '0 0 * * *'
  workflow_dispatch: 
    # 允许手动点击按钮触发

jobs:
  sync_with_upstream:
    runs-on: ubuntu-latest
    name: Sync with Upstream

    steps:
    # 1. 检出你的代码
    - name: Checkout target repo
      uses: actions/checkout@v3
      with:
        fetch-depth: 0 # 获取完整历史记录

    # 2. 配置 Git 用户信息（假装是机器人提交的）
    - name: Configure Git
      run: |
        git config --global user.name 'GitHub Actions Bot'
        git config --global user.email 'actions@github.com'

    # 3. 添加上游仓库并同步
    # 【注意】修改下面这一行，换成原作者的仓库地址！
    - name: Sync upstream changes
      run: |
        git remote add upstream https://github.com/ACL4SSR/ACL4SSR.git
        git fetch upstream
        git merge upstream/master
        git push origin master
